{% extends "base.html" %}

{% block title %}Record Payment{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">Record Payment</div>
    
    <!-- Bill Summary -->
    <div style="margin-bottom: 2rem; padding: 1rem; background: #f9fafb; border-radius: 6px;">
        <h3 style="margin-bottom: 0.5rem;">Bill Summary</h3>
        <p><strong>Student:</strong> {{ bill.student_name }}</p>
        <p><strong>Grade Level:</strong> {{ bill.grade_level }}</p>
        <p><strong>Total Amount:</strong> ₱{{ "%.2f"|format(bill.total_amount) }}</p>
        <p><strong>Amount Paid:</strong> ₱{{ "%.2f"|format(bill.amount_paid) }}</p>
        <p style="font-size: 1.2rem; color: #ef4444; font-weight: bold;">
            <strong>Balance Due:</strong> ₱{{ "%.2f"|format(bill.balance) }}
        </p>
    </div>
    
    <form method="post">
        <div class="form-group">
            <label class="form-label">Payment Amount *</label>
            <input type="number" step="0.01" name="amount" class="form-control" 
                   max="{{ bill.balance }}" placeholder="Enter amount" required>
            <small style="color: #6b7280;">Maximum: ₱{{ "%.2f"|format(bill.balance) }}</small>
        </div>
        
        <div class="form-group">
            <label class="form-label">Payment Method *</label>
            <select name="payment_method" class="form-control" required>
                <option value="">Select method</option>
                <option value="cash">Cash</option>
                <option value="card">Card</option>
                <option value="online">Online Transfer</option>
                <option value="check">Check</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Reference Number</label>
            <input type="text" name="reference_number" class="form-control" 
                   placeholder="Transaction/Check number (optional)">
        </div>
        
        <div class="form-group">
            <label class="form-label">Notes</label>
            <textarea name="notes" class="form-control" rows="3" 
                      placeholder="Additional notes (optional)"></textarea>
        </div>
        
        <div style="margin-top: 1.5rem; display: flex; gap: 1rem;">
            <button type="submit" class="btn btn-success">Record Payment</button>
            <a href="{{ url_for('cashier.view_bill', bill_id=bill.bill_id) }}" 
               class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
